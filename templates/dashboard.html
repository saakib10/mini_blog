{% extends 'base.html' %}
{% load static %}

{% block msg %}
    {% if messages %}
      {% for message in messages %}
          <div class="mt-5">
              <div class="alert alert-warning alert-dismissible fade show" role="alert">
                  <strong>{{ message }}</strong>
                  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                  </button>
              </div>

          </div>
      {% endfor %}
    {% endif %}

{% endblock msg %}
{% block side %}
    <div class="col-sm-10">
        <div class="jumbotron justify-content-center">
            <h4 class="display-10 font-weight-bold">Dashboard</h4>
        </div>
    </div>
<div class=" col-sm-3 mt-2">
    <h5 class="alert alert-info">User Profile</h5>
    <a class="alert alert-info">{{ name }}</a>
</div>


{% endblock side %}

{% block content %}

    <div class="col-sm-10">


        <div class="mt-5">
                <form action="" method="post" class="text-center">
                    <a href="{% url 'addpost' %}" class="btn btn-info" >Add post</a>
                </form>
        </div>

        {% if posts %}

        <table class="mt-5 table table-hover ">
              <thead class="thead-light">
                <tr class="text-center">
                 {% comment %} <th scope="col" style="width: 2%">ID</th> {% endcomment %}
                  <th scope="col" style="width: 20%">Title</th>
                  <th scope="col" style="width: 55%">Description</th>
                  <th scope="col" style="width: 15%">Action</th>
                </tr>
              </thead>
              <tbody>
              {% for post in posts %}
                <tr>
                  {% comment %}<th scope="row">{{ post.id }}</th>{% endcomment %}
                  <td class="text-center" scope="row">{{ post.title }}</td>
                  <td>{{ post.desc }}</td>
                  <td class="thead-light ">
                      <a href="{% url 'updatepost' post.id %}" class="btn btn-warning">Edit</a>
                      {% if perms.blog.delete_post %}
                      <form action="{% url 'deletepost' post.id %}" class="d-inline" method="post">
                          {% csrf_token %}
                          <input type="submit" class="btn btn-danger btn-sm" value="Delete">
                      </form>
                      {% endif %}


                  </td>
                </tr>
              {% endfor %}
              </tbody>

        </table>
        {% else %}
            <h1 class="mt-5 alert alert-danger">No data </h1>
        {% endif %}
    </div>

{% endblock content %}